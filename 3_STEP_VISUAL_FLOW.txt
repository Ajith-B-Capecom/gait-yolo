╔══════════════════════════════════════════════════════════════════════════════╗
║                  3-STEP OPENGAIT PIPELINE - VISUAL FLOW                      ║
╚══════════════════════════════════════════════════════════════════════════════╝

┌──────────────────────────────────────────────────────────────────────────────┐
│ COMPLETE PIPELINE OVERVIEW                                                   │
└──────────────────────────────────────────────────────────────────────────────┘

   ┌─────────────────────────────────────────────────────────────────────────┐
   │                          python main.py                                 │
   └─────────────────────────────────────────────────────────────────────────┘
                                    │
                                    ▼
   ╔═════════════════════════════════════════════════════════════════════════╗
   ║ STEP 1: VIDEO TO FRAMES                                                ║
   ╚═════════════════════════════════════════════════════════════════════════╝
   
   Input:
   ┌─────────────────────┐
   │  📹 Video File      │
   │  walking.mp4        │
   │  (10 seconds)       │
   └──────────┬──────────┘
              │
              ▼
   ┌─────────────────────┐
   │  Extract Frames     │
   │  • Read video       │
   │  • Extract at       │
   │    interval         │
   │  • Save as JPG      │
   └──────────┬──────────┘
              │
              ▼
   Output:
   ┌─────────────────────┐
   │  📁 Frames          │
   │  frame_000000.jpg   │
   │  frame_000001.jpg   │
   │  frame_000002.jpg   │
   │  ... (300 frames)   │
   └─────────────────────┘

                                    │
                                    ▼
   ╔═════════════════════════════════════════════════════════════════════════╗
   ║ STEP 2: PERSON DETECTION (YOLOv11)                                     ║
   ╚═════════════════════════════════════════════════════════════════════════╝
   
   Input:
   ┌─────────────────────┐
   │  🖼️ Frame           │
   │  [Full scene with   │
   │   person + bg]      │
   └──────────┬──────────┘
              │
              ▼
   ┌─────────────────────┐
   │  YOLOv11 Detection  │
   │  • Detect person    │
   │  • Get bbox         │
   │  • Draw box         │
   │  • Crop person      │
   └──────────┬──────────┘
              │
              ├─────────────────────┐
              │                     │
              ▼                     ▼
   Output 1:              Output 2:
   ┌─────────────────┐    ┌─────────────────┐
   │  📊 Bbox Visual │    │  ✂️ Person Crop │
   │  ┌───────────┐  │    │  ┌─────────┐    │
   │  │           │  │    │  │ ▓▓▓▓▓▓  │    │
   │  │  ┌────┐   │  │    │  │ ▓▓▓▓▓▓  │    │
   │  │  │████│   │  │    │  │ ▓▓▓▓▓▓  │    │
   │  │  │████│   │  │    │  │ ▓▓▓▓▓▓  │    │
   │  │  └────┘   │  │    │  └─────────┘    │
   │  │  Person   │  │    │  (Just person)  │
   │  └───────────┘  │    └─────────────────┘
   │  (with box)     │
   └─────────────────┘

                                    │
                                    ▼
   ╔═════════════════════════════════════════════════════════════════════════╗
   ║ STEP 3: SILHOUETTE EXTRACTION                                          ║
   ╚═════════════════════════════════════════════════════════════════════════╝
   
   Input:
   ┌─────────────────────┐
   │  ✂️ Cropped Person  │
   │  ┌─────────┐        │
   │  │ ▓▓▓▓▓▓  │        │
   │  │ ▓▓▓▓▓▓  │        │
   │  │ ▓▓▓▓▓▓  │        │
   │  └─────────┘        │
   └──────────┬──────────┘
              │
              ▼
   ┌─────────────────────┐
   │  YOLO Segmentation  │
   │  or Background Sub  │
   │  • Segment person   │
   │  • Create mask      │
   │  • Binary output    │
   └──────────┬──────────┘
              │
              ▼
   Output:
   ┌─────────────────────┐
   │  🎭 Silhouette      │
   │  ┌─────────┐        │
   │  │ ███████ │        │
   │  │ ███████ │        │
   │  │ ███████ │        │
   │  └─────────┘        │
   │  (White on black)   │
   └─────────────────────┘


┌──────────────────────────────────────────────────────────────────────────────┐
│ FOLDER STRUCTURE AFTER PROCESSING                                            │
└──────────────────────────────────────────────────────────────────────────────┘

data/
│
├── videos/                          [INPUT]
│   └── person1/
│       └── walking.mp4              📹 Original video
│
├── frames/                          [STEP 1 OUTPUT]
│   └── person1/
│       └── walking/
│           ├── frame_000000.jpg     🖼️ Full frame
│           ├── frame_000001.jpg     🖼️ Full frame
│           └── ...
│
├── detected_persons/                [STEP 2 OUTPUT]
│   └── person1/
│       └── walking/
│           ├── bbox_visualizations/
│           │   ├── frame_000000.jpg 📊 Frame with box
│           │   └── ...
│           └── person_crops/
│               ├── frame_000000_person0.jpg  ✂️ Cropped person
│               ├── frame_000001_person0.jpg  ✂️ Cropped person
│               └── ...
│
└── silhouettes/                     [STEP 3 OUTPUT]
    └── person1/
        └── walking/
            ├── frame_000000_person0_silhouette.jpg  🎭 Silhouette
            ├── frame_000001_person0_silhouette.jpg  🎭 Silhouette
            └── ...


┌──────────────────────────────────────────────────────────────────────────────┐
│ VISUAL COMPARISON: EACH STEP                                                 │
└──────────────────────────────────────────────────────────────────────────────┘

STEP 1: Frame                STEP 2: Detection           STEP 3: Silhouette
═══════════════              ═════════════════           ══════════════════

┌─────────────────┐          ┌─────────────────┐        ┌─────────────────┐
│                 │          │                 │        │                 │
│  🌳  👤  🌳     │          │  🌳  ┌────┐ 🌳  │        │                 │
│                 │    →     │      │👤  │     │   →    │      ███        │
│  🌳     🌳      │          │  🌳  └────┘ 🌳  │        │      ███        │
│                 │          │                 │        │      ███        │
└─────────────────┘          └─────────────────┘        └─────────────────┘
Full scene                   Person detected             Clean silhouette
with background              and cropped                 (white on black)


┌──────────────────────────────────────────────────────────────────────────────┐
│ MULTIPLE PERSONS HANDLING                                                    │
└──────────────────────────────────────────────────────────────────────────────┘

STEP 1: Frame with 2 persons
┌─────────────────────────────┐
│                             │
│    👤          👤           │
│                             │
└─────────────────────────────┘

STEP 2: Detection separates them
┌─────────────────────────────┐
│                             │
│  ┌────┐      ┌────┐         │
│  │👤  │      │👤  │         │
│  └────┘      └────┘         │
│  Person0     Person1        │
└─────────────────────────────┘

Crops saved as:
• frame_000000_person0.jpg
• frame_000000_person1.jpg

STEP 3: Separate silhouettes
┌──────────┐    ┌──────────┐
│   ███    │    │   ███    │
│   ███    │    │   ███    │
│   ███    │    │   ███    │
└──────────┘    └──────────┘
Person 0         Person 1


┌──────────────────────────────────────────────────────────────────────────────┐
│ CONFIGURATION IN main.py                                                     │
└───────────────────────────────���──────────────────────────────────────────────┘

# STEP 1: Frame Extraction (line ~80)
┌────────────────────────────────────────────────────────────────────────┐
│ frame_interval = 1  # Extract every frame                              │
│                     # 2 = every 2nd, 5 = every 5th                     │
└────────────────────────────────────────────────────────────────────────┘

# STEP 2: Person Detection (line ~95)
┌────────────────────────────────────────────────────────────────────────┐
│ detection_model = 'yolo11n.pt'  # Model: n, s, m, l, x                │
│ detection_conf = 0.5            # Confidence: 0.1-0.9                  │
│ device = 'cpu'                  # Device: cpu, cuda, 0, 1              │
│ save_bbox_images = True         # Save visualizations                  │
│ save_crops = True               # Save cropped persons                 │
└────────────────────────────────────────────────────────────────────────┘

# STEP 3: Silhouette Extraction (line ~120)
┌────────────────────────────────────────────────────────────────────────┐
│ method = 'yolo'                      # Method: yolo, mog2, knn         │
│ silhouette_model = 'yolo11n-seg.pt' # Segmentation model              │
│ silhouette_conf = 0.25               # Confidence threshold            │
└────────────────────────────────────────────────────────────────────────┘


┌──────────────────────────────────────────────────────────────────────────────┐
│ PROCESSING TIME BREAKDOWN                                                    │
└──────────────────────────────────────────────────────────────────────────────┘

For 300 frames (1920x1080):

CPU Processing:
═══════════════════════════════════════════════════════════════════

STEP 1: Frame Extraction     ████  5 sec
STEP 2: Person Detection     ████████████████████████████  30 sec
STEP 3: Silhouette (YOLO)    ████████████████████████████████████████  45 sec
                             ─────────────────────────────────────────
TOTAL:                       80 seconds

GPU Processing (NVIDIA RTX 3060):
═══════════════════════════════════════════════════════════════════

STEP 1: Frame Extraction     ████  5 sec
STEP 2: Person Detection     ████  5 sec
STEP 3: Silhouette (YOLO)    ███████  8 sec
                             ─────────────────────────────────────────
TOTAL:                       18 seconds

GPU Speedup: 4.4x faster!


┌──────────────────────────────────────────────────────────────────────────────┐
│ MODEL SELECTION GUIDE                                                        │
└──────────────────────────────────────────────────────────────────────────────┘

STEP 2: Detection Models
═════════════════════════════════════════════════════════════════════

Model          Size    Speed (CPU)    Speed (GPU)    Accuracy
─────────────────────────────────────────────────────────────────────
yolo11n.pt     2.5 MB  ⚡⚡⚡⚡⚡        ⚡⚡⚡⚡⚡        ⭐⭐⭐
yolo11s.pt     9.4 MB  ⚡⚡⚡⚡          ⚡⚡⚡⚡⚡        ⭐⭐⭐⭐
yolo11m.pt     20 MB   ⚡⚡⚡           ⚡⚡⚡⚡⚡        ⭐⭐⭐⭐
yolo11l.pt     26 MB   ⚡⚡            ⚡⚡⚡⚡⚡        ⭐⭐⭐⭐⭐
yolo11x.pt     30 MB   ⚡             ⚡⚡⚡⚡⚡        ⭐⭐⭐⭐⭐

STEP 3: Segmentation Models
═════════════════════════════════════════════════════════════════════

Model              Size    Speed (CPU)    Speed (GPU)    Accuracy
─────────────────────────────────────────────────────────────────────
yolo11n-seg.pt     2.5 MB  ⚡⚡⚡⚡⚡        ⚡⚡⚡⚡⚡        ⭐⭐⭐
yolo11s-seg.pt     9.4 MB  ⚡⚡⚡⚡          ⚡⚡⚡⚡⚡        ⭐⭐⭐⭐
yolo11m-seg.pt     20 MB   ⚡⚡⚡           ⚡⚡⚡⚡⚡        ⭐⭐⭐⭐
yolo11l-seg.pt     26 MB   ⚡⚡            ⚡⚡⚡⚡⚡        ⭐⭐⭐⭐⭐
yolo11x-seg.pt     30 MB   ⚡             ⚡⚡⚡⚡⚡        ⭐⭐⭐⭐⭐

Alternative: Background Subtraction (STEP 3 only)
═════════════════════════════════════════════════════════════════════

Method    Speed       Accuracy    Requirements
─────────────────────────────────────────────────────────────────────
MOG2      ⚡⚡⚡⚡⚡     ⭐⭐⭐       Static background
KNN       ⚡⚡⚡⚡      ⭐⭐⭐⭐     Static background


┌──────────────────────────────────────────────────────────────────────────────┐
│ RECOMMENDED CONFIGURATIONS                                                   │
└──────────────────────────────────────────────────────────────────────────────┘

Best Quality (GPU):
┌────────────────────────────────────────────────────────────────────────┐
│ frame_interval = 1                                                     │
│ detection_model = 'yolo11l.pt'                                         │
│ detection_conf = 0.5                                                   │
│ method = 'yolo'                                                        │
│ silhouette_model = 'yolo11l-seg.pt'                                    │
│ device = 'cuda'                                                        │
└────────────────────────────────────────────────────────────────────────┘

Balanced (CPU):
┌────────────────────────────────────────────────────────────────────────┐
│ frame_interval = 2                                                     │
│ detection_model = 'yolo11n.pt'                                         │
│ detection_conf = 0.5                                                   │
│ method = 'yolo'                                                        │
│ silhouette_model = 'yolo11n-seg.pt'                                    │
│ device = 'cpu'                                                         │
└────────────────────────────────────────────────────────────────────────┘

Maximum Speed:
┌────────────────────────────────────────────────────────────────────────┐
│ frame_interval = 5                                                     │
│ detection_model = 'yolo11n.pt'                                         │
│ detection_conf = 0.5                                                   │
│ method = 'mog2'  # Background subtraction                              │
│ device = 'cpu'                                                         │
└────────────────────────────────────────────────────────────────────────┘


┌──────────────────────────────────────────────────────────────────────────────┐
│ QUICK COMMANDS                                                               │
└──────────────────────────────────────────────────────────────────────────────┘

Run complete pipeline:
┌────────────────────────────────────────────────────────────────────────┐
│ python main.py                                                         │
└────────────────────────────────────────────────────────────────────────┘

Run individual steps:
┌────────────────────────────────────────────────────────────────────────┐
│ python scripts/video_to_frames.py           # STEP 1 only             │
│ python scripts/detect_person.py             # STEP 2 only             │
│ python scripts/silhouette_extraction.py     # STEP 3 only             │
└────────────────────────────────────────────────────────────────────────┘

Check GPU availability:
┌────────────────────────────────────────────────────────────────────────┐
│ python -c "import torch; print(torch.cuda.is_available())"            │
└────────────────────────────────────────────────────────────────────────┘


╔══════════════════════════════════════════════════════════════════════════════╗
║                           READY TO PROCESS!                                  ║
║                                                                              ║
║  1. Add videos to: data/videos/person1/, person2/, etc.                      ║
║  2. Configure in main.py (optional)                                          ║
║  3. Run: python main.py                                                      ║
║  4. Check outputs in data/detected_persons/ and data/silhouettes/            ║
╚══════════════════════════════════════════════════════════════════════════════╝
